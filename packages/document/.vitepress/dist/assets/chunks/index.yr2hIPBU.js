import"./theme.BmlBtjUe.js";import{x as C,a0 as U,p as Q,h as O,d as R,c as I,o as _,j as E,O as L,z as le,J as x,T as ce,a8 as he,a7 as ve,G as ue,H as ie,b as me,n as pe,k as de}from"./framework.BcsHb19y.js";const fe={r:0,g:0,b:0,a:0},ne=3e3,A=()=>typeof window<"u";function se(e){if(!Number.isInteger(e)||e<=0)throw new RangeError("max must be a positive integer");const t=new Map;return{get(s){const n=t.get(s);if(n!==void 0)return t.delete(s),t.set(s,n),n},set(s,n){t.has(s)?t.delete(s):t.size>=e&&t.delete(t.keys().next().value),t.set(s,n)},delete(s){return t.delete(s)},clear(){t.clear()},has(s){return t.has(s)},get size(){return t.size}}}const Y=se(120);function oe(e){const t=Y.get(e);if(t)return{...t};let s={r:0,g:0,b:0,a:255};if(e.startsWith("rgb(")||e.startsWith("rgba(")){const n=e.match(/rgba?\(\s*(\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)/i);n&&(s.r=parseInt(n[1],10),s.g=parseInt(n[2],10),s.b=parseInt(n[3],10),n[4]&&(s.a=Math.round(parseFloat(n[4])*255)))}else e.startsWith("#")&&(e=e.slice(1),e.length===3?(s.r=parseInt(e[0]+e[0],16),s.g=parseInt(e[1]+e[1],16),s.b=parseInt(e[2]+e[2],16)):e.length===4?(s.r=parseInt(e[0]+e[0],16),s.g=parseInt(e[1]+e[1],16),s.b=parseInt(e[2]+e[2],16),s.a=parseInt(e[3]+e[3],16)):e.length===6?(s.r=parseInt(e.slice(0,2),16),s.g=parseInt(e.slice(2,4),16),s.b=parseInt(e.slice(4,6),16)):e.length===8&&(s.r=parseInt(e.slice(0,2),16),s.g=parseInt(e.slice(2,4),16),s.b=parseInt(e.slice(4,6),16),s.a=parseInt(e.slice(6,8),16)));return Y.set(e,s),{...s}}const N=(e,t)=>A()?oe(getComputedStyle(document.documentElement).getPropertyValue(`--px-${e}-${t}`)):fe;function G(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function ge(e,t,s,n=255){const o=e/255,v=t/255,i=s/255,l=G(o),u=G(v),a=G(i);let c=l*.41239079926595934+u*.357584339383878+a*.1804807884018343,r=l*.21263900587151027+u*.715168678767756+a*.07219231536073371,f=l*.01933081871559182+u*.11919477979462598+a*.9505321522496607,w=.819022437996703*c+.3619062600528904*r-.1288737815209879*f,V=.0329836539323885*c+.9292868615863434*r+.0361446663506424*f,d=.0481771893596242*c+.2642395317527308*r+.6335478284694309*f;w=Math.cbrt(w),V=Math.cbrt(V),d=Math.cbrt(d);const M=.210454268309314*w+.7936177747023054*V-.0040720430116193*d,z=1.9779985324311684*w-2.42859224204858*V+.450593709617411*d,p=.0259040424655478*w+.7827717124575296*V-.8086757549230774*d,g=Math.sqrt(z*z+p*p);let b=Math.atan2(p,z)*180/Math.PI;return b<0&&(b+=360),{l:M,c:g,h:b,a:n}}function W(e){return e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055}function F(e,t,s,n=255){const o=s*Math.PI/180,v=t*Math.cos(o),i=t*Math.sin(o);let l=e+.3963377773761749*v+.2158037573099136*i,u=e-.1055613458156586*v-.0638541728258133*i,a=e-.0894841775298119*v-1.2914855480194092*i;l=l*l*l,u=u*u*u,a=a*a*a;const c=1.2268798758459243*l-.5578149944602171*u+.2813910456659647*a,r=-.0405757452148008*l+1.112286803280317*u-.0717110580655164*a,f=-.0763729366746601*l-.4214933324022432*u+1.5869240198367816*a,w=3.2409699419045226*c-1.537383177570094*r-.4986107602930034*f,V=-.9692436362808796*c+1.8759675015077202*r+.04155505740717559*f,d=.05563007969699366*c-.20397695888897652*r+1.0569715142428786*f,M=W(w),z=W(V),p=W(d);return{r:Math.round(M*255),g:Math.round(z*255),b:Math.round(p*255),a:n}}function be(e,t,s){const{r:n,g:o,b:v}=F(t,e,s);return n>=0&&n<=255&&o>=0&&o<=255&&v>=0&&v<=255}function Z(e,t){let n=0,o=2;for(;o-n>1e-6;){const v=(n+o)/2;be(v,e,t)?n=v:o=v}return n}const j=se(60);function xe(e,t,s,n=255,o=!1){const v=`${e},${t},${s},${n},${o}`,i=j.get(v);if(i)return i;const l=ge(e,t,s,n);let u=[];const a=l.c<.049?0:.049,c=o?Math.min(Math.max(l.l,.05),.85):Math.min(Math.max(l.l,.15),.95),r=Math.min(Math.max(l.c,a),Z(c,l.h)),f=Math.min(c+.35,o?.85:.9),w=Math.max(c-.35,o?.1:.15),V=o?(c-w)/4:(f-c)/4,d=(r-a)/4,M=o?(f-c)/3:(c-w)/3,z=(r-a)/3;for(let p=0;p<5;p++){const g=c+(o?-1:1)*V*(5-p),b=Math.min(r-d*(5-p),Z(g,l.h)),$=l.h,T=F(g,b,$,n);u.push(T)}u.push(F(c,r,l.h,n));for(let p=0;p<4;p++){const g=c-(o?-1:1)*M*(p+1),b=Math.min(r-z*(p+1),Z(g,l.h)),$=l.h,T=F(g,b,$,n);u.push(T)}return j.set(v,u),u}const P=e=>`rgba(${e.r}, ${e.g}, ${e.b}, ${+(e.a/255)})`,K=new WeakMap,k=new WeakMap,we=e=>()=>{const t=k.get(e);t?.forEach(s=>s())},Ve=()=>{const e=C(!1),t=C(void 0);function s(o){e.value=o.matches}if(A()){const o=window.matchMedia("(prefers-color-scheme: dark)");s(o),o.addEventListener("change",s),U(()=>{o.removeEventListener("change",s)})}const n=()=>{if(A()){let o=!1,v=!1;document.documentElement.className.split(" ").forEach(i=>{i==="dark"&&(o=!0),i==="light"&&(v=!0)}),t.value=o?!0:v?!1:void 0}};return A()&&(Q(()=>{const o=K.get(document.documentElement)||new MutationObserver(we(document.documentElement));K.set(document.documentElement,o),o.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),k.set(document.documentElement,[...k.get(document.documentElement)||[],n]),n()}),U(()=>{k.set(document.documentElement,(k.get(document.documentElement)||[]).filter(o=>o!==n))})),O(()=>t.value??e.value)},He=new RegExp("[-_\\s]|(?<=[a-z])(?=[A-Z])|(?<=[A-Z])(?=[A-Z][a-z])|(\\d+)");function Me(e){return e.split(He).filter(Boolean)}function ye(e){const t=Me(e);let s="";const n=t.length;for(let o=0;o<n;o++)s+=t[o].toLowerCase()+(o<n-1?"-":"");return s}function re(e){return typeof e=="function"}function D(e){return typeof e=="string"||e instanceof String}function ze(e){return e==null}const Ce=(e,t,s=!0)=>{if(!A())return null;const n=new ResizeObserver(t);return Q(()=>{setTimeout(()=>{s&&t(),e.value&&n.observe(e.value)})}),U(()=>{n.disconnect()}),n},_e=R({props:{size:{},color:{}},setup(e){const t=e;return(s,n)=>(_(),I("svg",{class:"px-icon-hn",style:L({color:t.color,fontSize:t.size+"px"}),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[...n[0]||(n[0]=[E("path",{d:"M23 9v6h-1v2h-3v-2h1V9h-1V7h-1V6h-1V5h-2V4h-2V3h-1V1h3v1h2v1h2v1h1v1h1v2h1v2z"},null,-1)])],4))}}),Ie=R({props:{size:{},color:{}},setup(e){const t=e;return(s,n)=>(_(),I("svg",{class:"px-icon-hn",style:L({color:t.color,fontSize:t.size+"px"}),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[...n[0]||(n[0]=[E("path",{d:"M22 9V7h-1V5h-1V4h-1V3h-2V2h-2V1H9v1H7v1H5v1H4v1H3v2H2v2H1v6h1v2h1v2h1v1h1v1h2v1h2v1h6v-1h2v-1h2v-1h1v-1h1v-2h1v-2h1V9zM11 6h2v2h-2zm-1 9h1v-5h-1V9h3v6h1v2h-4z"},null,-1),E("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1)])],4))}}),Ee=R({props:{size:{},color:{}},setup(e){const t=e;return(s,n)=>(_(),I("svg",{class:"px-icon-hn",style:L({color:t.color,fontSize:t.size+"px"}),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[...n[0]||(n[0]=[E("path",{d:"M22 20v-2h-1v-2h-1v-2h-1v-2h-1v-2h-1V8h-1V6h-1V4h-1V2h-1V1h-2v1h-1v2H9v2H8v2H7v2H6v2H5v2H4v2H3v2H2v2H1v2h1v1h20v-1h1v-2zm-12-9h4v3h-1v3h-2v-3h-1zm1 7h2v2h-2z"},null,-1)])],4))}}),Re=R({props:{size:{},color:{}},setup(e){const t=e;return(s,n)=>(_(),I("svg",{class:"px-icon-hn",style:L({color:t.color,fontSize:t.size+"px"}),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[...n[0]||(n[0]=[E("path",{d:"M22 8V7h-1V6h-1V5h-1V4h-1V3h-1V2h-1V1H8v1H7v1H6v1H5v1H4v1H3v1H2v1H1v8h1v1h1v1h1v1h1v1h1v1h1v1h1v1h8v-1h1v-1h1v-1h1v-1h1v-1h1v-1h1v-1h1V8zm-6 9h-2v-1h-1v-1h-2v1h-1v1H8v-1H7v-2h1v-1h1v-2H8v-1H7V8h1V7h2v1h1v1h2V8h1V7h2v1h1v2h-1v1h-1v2h1v1h1v2h-1z"},null,-1)])],4))}}),Be=R({props:{size:{},color:{}},setup(e){const t=e;return(s,n)=>(_(),I("svg",{class:"px-icon-hn",style:L({color:t.color,fontSize:t.size+"px"}),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[...n[0]||(n[0]=[E("path",{d:"M22 9V7h-1V5h-1V4h-1V3h-2V2h-2V1H9v1H7v1H5v1H4v1H3v2H2v2H1v6h1v2h1v2h1v1h1v1h2v1h2v1h6v-1h2v-1h2v-1h1v-1h1v-2h1v-2h1V9zm-4 3h-1v1h-1v1h-1v1h-1v1h-1v1h-1v1h-2v-1H9v-1H8v-1H7v-1H6v-2h1v-1h2v1h1v1h2v-1h1v-1h1v-1h1V9h1V8h2v1h1v2h-1z"},null,-1)])],4))}}),Le=R({props:{size:{},color:{}},setup(e){const t=e;return(s,n)=>(_(),I("svg",{class:"px-icon-hn",style:L({color:t.color,fontSize:t.size+"px"}),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[...n[0]||(n[0]=[E("path",{d:"M14 13h1v1h1v1h1v1h1v1h1v1h1v1h1v1h1v1h-1v1h-1v-1h-1v-1h-1v-1h-1v-1h-1v-1h-1v-1h-1v-1h-1v-1h-2v1h-1v1H9v1H8v1H7v1H6v1H5v1H4v1H3v-1H2v-1h1v-1h1v-1h1v-1h1v-1h1v-1h1v-1h1v-1h1v-2H9v-1H8V9H7V8H6V7H5V6H4V5H3V4H2V3h1V2h1v1h1v1h1v1h1v1h1v1h1v1h1v1h1v1h2V9h1V8h1V7h1V6h1V5h1V4h1V3h1V2h1v1h1v1h-1v1h-1v1h-1v1h-1v1h-1v1h-1v1h-1v1h-1z"},null,-1)])],4))}}),$e=R({__name:"index",props:{content:{default:""},icon:null,duration:{default:3e3},id:null,type:{default:"normal"},color:null,closable:{type:Boolean}},emits:["close"],setup(e,{expose:t,emit:s}){const n=e,o=C(!1),v=C(!1),i=h=>{v.value=h},l=h=>{o.value=h},u=C(!1);let a;Q(()=>{u.value=!0,c()}),U(()=>{clearTimeout(a)});function c(){a=setTimeout(()=>f(),n.duration)}function r(){clearTimeout(a),a=void 0}function f(){u.value=!1}const w=s,V=()=>{w("close",n.id),r()},d=C(),M=C(),z=h=>{if(!h)return"normal";switch(h){case"info":return"primary";case"error":return"danger";default:return h}},p=Ve(),g=O(()=>{if(!n.color)return null;const h=oe(n.color);return xe(h.r,h.g,h.b,h.a,p.value)}),b=O(()=>g.value?P(g.value[5]):void 0),$=O(()=>{if(g.value)return v.value?P(g.value[6]):o.value?P(g.value[4]):P(g.value[5])});function T(h="normal",y){if(y)return y[5];{const H=z(h);return H==="normal"?N("neutral",10):H==="loading"?N("neutral",8):N(H,6)}}const ae=(h,y,H,B,m)=>{h.fillStyle=`rgba(${B.r}, ${B.g}, ${B.b}, ${B.a/255})`,h.fillRect(m,0,y-2*m,m),h.fillRect(y-m,m,m,H-2*m),h.fillRect(m,H-m,y-2*m,m),h.fillRect(0,m,m,H-2*m);const S=N("neutral",1);h.fillStyle=`rgba(${S.r}, ${S.g}, ${S.b}, ${S.a/255})`,h.fillRect(m,m,y-2*m,H-2*m)},X=()=>{const h=getComputedStyle(document.documentElement),y=parseInt(h.getPropertyValue("--px-bit"));if(!d.value||!M.value)return;const H=d.value.getContext("2d",{willReadFrequently:!0}),B=M.value.getBoundingClientRect();if(d.value.width=B.width,d.value.height=B.height,!H)return;const m=T(n.type,g.value);ae(H,d.value.width,d.value.height,m,y)};return Ce(M,X),le([()=>n.type,g,p],()=>{setTimeout(()=>{X()})}),t({close:f}),()=>x(ce,{name:"px-message-fade",onAfterLeave:V},{default:()=>[u.value&&x("div",{ref:h=>M.value=h,onMouseenter:r,onMouseleave:c,class:{"px-message":!0,pixelium:!0,[`px-message__${n.type||"primary"}`]:!0}},[(!!n.icon||n.type&&n.type!=="normal"&&n.type!=="sakura")&&x("div",{class:"px-message-icon-wrapper"},[n.icon?n.icon():n.type==="info"?x(Ie,{class:"px-message-icon",style:{fill:b.value}},null):n.type==="success"?x(Be,{class:"px-message-icon",style:{fill:b.value}},null):n.type==="warning"?x(Ee,{class:"px-message-icon",style:{fill:b.value}},null):n.type==="error"?x(Re,{class:"px-message-icon",style:{fill:b.value}},null):n.type==="loading"&&x(_e,{class:"px-message-icon px-message-icon__loading",style:{fill:b.value}},null)]),x("span",{class:"px-message-content",style:{color:b.value}},[D(n.content)?n.content:n.content()]),n.closable&&x("div",{class:"px-message-close-wrapper"},[x(Le,{class:"px-message-icon",style:{fill:$.value},onMouseenter:l(!0),onMouseleave:l(!1),onMousedown:i(!0),onMouseup:i(!1),onClick:f},null)]),x("canvas",{ref:h=>d.value=h,class:"px-message-canvas"},null)])]})}});var Te=Object.defineProperty,ke=(e,t,s)=>t in e?Te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,ee=(e,t,s)=>ke(e,typeof t!="symbol"?t+"":t,s);const Oe="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let J=(e=21)=>{let t="",s=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=Oe[s[e]&63];return t};class Ae{constructor(t){ee(this,"messages"),ee(this,"messageBox"),this.messages=C([]),this.messageBox=x(Ne,{messages:this.messages.value,zIndex:t.zIndex,position:t.position,onClose:v=>{const i=this.messages.value.findIndex(l=>l.id===v);i>=0&&this.messages.value.splice(i,1)}});const s=(D(t.root)?document.querySelector(t.root):t.root)||document.body,n=J(),o=document.createElement("div");o.id=n,o.className="px-message-box-wrapper",s.appendChild(o),he(this.messageBox,o)}push(t){const s=t.id??J();return this.messages.value.push({...t,id:s}),s}close(t){var s,n;(n=(s=this.messageBox.component)==null?void 0:s.exposed)==null||n.close(t)}clear(){this.messages.value.length=0}}const q={top:void 0,bottom:void 0,topLeft:void 0,topRight:void 0,bottomLeft:void 0,bottomRight:void 0},Se=e=>{(D(e)||re(e))&&(e={content:e});const t=e.position||"top",s=q[t]?q[t]:q[t]=new Ae({position:t,zIndex:ne,root:e.root||"body"}),n=s.push({content:e.content,icon:e.icon,duration:e.duration||3e3,type:e.type||"normal",color:e.color,closable:e.closable});return{close:()=>s.close(n),clear:()=>s.clear()}},te=Se;["info","success","warning","error","loading","sakura","normal"].forEach(e=>{te[e]=t=>((D(t)||re(t))&&(t={content:t}),te({...t,type:e}))});const Ne=R({name:"MessageBoxInner",__name:"message-box",props:{messages:{},position:{},zIndex:{default:ne},root:{},"onUpdate:messages":{}},emits:["close"],setup(e,{expose:t,emit:s}){const n=e,o=ve(n,"messages"),v=s,i=O(()=>o.value.map(a=>({...a,id:a.id??J()}))),l=a=>{if(!ze(a)){if(n["onUpdate:messages"]){const c=i.value.findIndex(r=>r.id===a);if(c>=0){const r=[...i.value];r.splice(c,1),o.value=r}}v("close",a)}},u=C([]);return t({close:a=>{var c;const r=i.value.findIndex(f=>f.id===a);r!==-1&&((c=u.value[r])==null||c.close())}}),(a,c)=>(_(),I("div",{class:"px-message-box",style:L({zIndex:n.zIndex})},[E("div",{class:pe(["px-message-box-container",{[`px-message-box-container__${de(ye)(n.position||"top")}`]:!0}])},[(_(!0),I(ue,null,ie(i.value,r=>(_(),me($e,{key:r.id,duration:r.duration,content:r.content,id:r.id,onClose:l,type:r.type,color:r.color,icon:r.icon,closable:r.closable,ref_for:!0,ref_key:"messageRef",ref:u},null,8,["duration","content","id","type","color","icon","closable"]))),128))],2)],4))}});export{te as m};
